<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notas</title>

    <script src="assets/data/data-couses.js"></script>
    <script src="assets/faker/faker.js"></script>

    <script>

            console.log(cursos);

            for (let i = 0; i < cursos.length; i++){
                for (let j = 0; j < cursos[i].capacidad; j++){
                    cursos[i].estudiantes.push(faker.name.findName());
                }
                for (let j = 0; j < Object.keys(cursos[i].calificaciones).length - 1; j++) {
                    for (let k = 0; k < cursos[i].capacidad; k++) {
                        let notaEstudiante = {nombre : cursos[i].estudiantes[k], nota: notaAleatoria()}
                        Object.values(cursos[i].calificaciones)[j].push(notaEstudiante);
                    }
                }
                for (let k = 0; k < cursos[i].capacidad; k++) {
                    let notaFinal = Math.round((Object.values(cursos[i].calificaciones)[2][k].nota + Object.values(cursos[i].calificaciones)[1][k].nota + Object.values(cursos[i].calificaciones)[0][k].nota) / 3);
                    let notaEstudiante = {nombre : cursos[i].estudiantes[k], nota: notaFinal}
                    Object.values(cursos[i].calificaciones)[3].push(notaEstudiante);
                }

            }
            const cursosCentro = cursos;

            console.log(cursos);
            console.log(cursosCentro);


        function notaAleatoria(){
            return faker.datatype.float({min: 1, max: 10, precision: .1});
        }

    </script>


</head>
<body>

    <div class="chart-container justify-content-center col-md-12">
        <canvas id="myChart"></canvas>
    </div>


    <script src="assets/chart/chart.js"></script>
    <script>
        console.log(cursosCentro);
        const datosNota = [];
        const datosAlumnos = [];
        for (let i = 0; i < cursosCentro[0].capacidad; i++) {
            datosNota.push(Object.values(cursosCentro[0].calificaciones)[3][i].nota);
            datosAlumnos.push(Object.values(cursosCentro[0].calificaciones)[3][i].nombre);

        }
        console.log(datosNota);
        const ctx1 = document.getElementById('myChart');
        const myChart = new Chart(ctx1, {
            type: 'Bar',
            title: cursosCentro[0].curso,
            data: {
                labels: datosAlumnos,
                datasets: [{
                    label: ' - Nota Final',
                    data: datosNota,
                    backgroundColor: function (context) {
                        var index = context.dataIndex;
                        var value = context.dataset.data[index];
                        return value < 5 ? 'rgba(239,101,101,0.93)' :
                            value >= 5 && value < 8 ? 'rgba(166,180,238,0.88)' :
                                'rgba(187,245,175,0.78)';
                    },
                    borderColor: function (context) {
                        var index = context.dataIndex;
                        var value = context.dataset.data[index];
                        return value < 5 ? 'rgb(182,0,0)' :
                            value >= 5 && value < 8 ? 'rgb(0,19,159)' :
                                'rgb(42,194,1)';
                    },
                    borderWidth: 2
                }]
            },
            options: {
                title: {
                  display: true,
                    position: 'top',
                  text: 'Hola'
                },
                scales: {
                    y: {
                        max: 10,
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>