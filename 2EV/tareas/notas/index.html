<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notas</title>


    <script src="assets/faker/faker.js"></script>
    <script src="assets/js/App.js"></script>

    <script>


         /*   sleep(500).then(() => {

                for (let i = 0; i < cursos.length; i++){
                    for (let j = 0; j < cursos[i].capacidad; j++){
                        cursos[i].estudiantes.push(faker.name.findName());
                    }
                    for (let j = 0; j < Object.keys(cursos[i].calificaciones).length - 1; j++) {
                        for (let k = 0; k < cursos[i].capacidad; k++) {
                            let notaEstudiante = {nombre : cursos[i].estudiantes[k], nota: notaAleatoria()}
                            Object.values(cursos[i].calificaciones)[j].push(notaEstudiante);
                        }
                    }
                    for (let k = 0; k < cursos[i].capacidad; k++) {
                        let notaFinal = Math.round((Object.values(cursos[i].calificaciones)[2][k].nota + Object.values(cursos[i].calificaciones)[1][k].nota + Object.values(cursos[i].calificaciones)[0][k].nota) / 3);
                        let notaEstudiante = {nombre : cursos[i].estudiantes[k], nota: notaFinal}
                        Object.values(cursos[i].calificaciones)[3].push(notaEstudiante);
                    }

                }


            }); */
            var datos = [];
        document.addEventListener('DOMContentLoaded', function (){
            datos = sacarDatos();
            sleep(1000).then(() => {
                console.log(datos);
                pintarPlantillas(datos);
            });

        })

        function notaAleatoria(){
            return faker.datatype.float({min: 1, max: 10, precision: .1});
        }
    </script>


</head>
<body>

    <div class="chart-container justify-content-center col-md-12">
        <canvas id="myChart"></canvas>
    </div>
    <div class="chart-container justify-content-center col-md-12">
        <canvas id="myChart1"></canvas>
    </div>

    <template id="div-canvas">
        <div class="chart-container justify-content-center col-md-12">

        </div>
    </template>

    <script src="assets/chart/chart.js"></script>
     <script>
        /*   const template = document.querySelector('#div-canvas').content;
          const div = new DocumentFragment();
          div.appendChild(document.importNode(template, true));
          const datosNota = [];
          const datosAlumnos = [];
          for (let i = 0; i < cursosCentro.length; i++) {

              let tablaAlumnosNota = document.createElement("canvas");
              let tablaMediaNotas = document.createElement("canvas");
              tablaAlumnosNota.id = cursos[i].curso;
              tablaMediaNotas.id = cursos[i].curso + '-media';

              div.appendChild(tablaAlumnosNota)
              document.body.insertBefore(div, document.lastChild);

          for (let j = 0; j < cursosCentro[i].capacidad; j++) {
              datosNota.push(Object.values(cursosCentro[i].calificaciones)[3][j].nota);
              datosAlumnos.push(Object.values(cursosCentro[i].calificaciones)[3][j].nombre);
          }

          const ctx1 = document.getElementById(cursos[i].curso);
          const myChart = new Chart(ctx1, {
              type: 'bar',
              data: {
                  labels: datosAlumnos,
                  datasets: [{
                      label: ' - Nota Final',
                      data: datosNota,
                      backgroundColor: function (context) {
                          var index = context.dataIndex;
                          var value = context.dataset.data[index];
                          return value < 5 ? 'rgba(239,101,101,0.93)' :
                              value >= 5 && value < 8 ? 'rgba(166,180,238,0.88)' :
                                  'rgba(187,245,175,0.78)';
                      },
                      borderColor: function (context) {
                          var index = context.dataIndex;
                          var value = context.dataset.data[index];
                          return value < 5 ? 'rgb(182,0,0)' :
                              value >= 5 && value < 8 ? 'rgb(0,19,159)' :
                                  'rgb(42,194,1)';
                      },
                      borderWidth: 2
                  }]
              },
              options: {
                  title: {
                    display: true,
                    position: 'top',
                    text: cursosCentro[0].curso
                  },
                  scales: {
                      y: {
                          max: 10,
                          beginAtZero: true
                      }
                  }
              }
          });
          let suspensos = 0;
          let aprobados = 0;
          let sobresalientes = 0;

          for (let i = 0; i < datosNota.length; i++){
              if(datosNota[i] < 5){
                  suspensos++;
              } else if(datosNota[i] > 5 && datosNota[i] < 8){
                  aprobados++;
              } else {
                  sobresalientes++;
              }

          }

          const ctx2 = document.getElementById(cursos[i].curso + '-media');
          const myChart1 = new Chart(ctx2, {
              type: 'bar',
              data: {
                  labels: ['Suspensos', 'Aprobados', 'Sobresalientes'],
                  datasets: [{
                      label: ' - Nota Final',
                      data: [suspensos, aprobados, sobresalientes],
                      backgroundColor: [
                          'rgba(239,101,101,0.93)',
                          'rgba(187,245,175,0.78)',
                          'rgba(166,180,238,0.88)'
                      ],
                      borderColor: [
                          'rgb(182,0,0)',
                          'rgb(0,19,159)',
                          'rgb(42,194,1)'
                      ],
                      borderWidth: 2
                  }]
              },
              options: {
                  title: {
                      display: true,
                      position: 'top',
                      text: 'Aprobados'
                  }
              }
          });
          } */
    </script>
</body>
</html>